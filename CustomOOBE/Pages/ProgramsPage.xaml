<UserControl x:Class="CustomOOBE.Pages.ProgramsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{DynamicResource PrimaryBackgroundBrush}">
    <Grid Margin="80,60">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="Programas útiles"
                       FontSize="48"
                       FontWeight="Light"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       Margin="0,0,0,10"/>

            <TextBlock Text="Selecciona los programas que deseas instalar"
                       FontSize="18"
                       Foreground="{DynamicResource TextSecondaryBrush}"/>
        </StackPanel>

        <!-- Lista de programas -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0,30,0,0">
            <ItemsControl x:Name="ProgramsList">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{DynamicResource SecondaryBackgroundBrush}"
                                BorderBrush="{DynamicResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="20"
                                Margin="0,0,0,15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <CheckBox Grid.Column="0"
                                         IsChecked="{Binding IsSelected}"
                                         VerticalAlignment="Center"
                                         Margin="0,0,20,0"/>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}"
                                               FontSize="20"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    <TextBlock Text="{Binding Description}"
                                               FontSize="14"
                                               Foreground="{DynamicResource TextSecondaryBrush}"
                                               TextWrapping="Wrap"
                                               Margin="0,5,0,0"/>
                                    <TextBlock Text="{Binding Category}"
                                               FontSize="12"
                                               Foreground="{DynamicResource AccentBrush}"
                                               Margin="0,5,0,0"/>
                                </StackPanel>

                                <ProgressBar Grid.Column="2"
                                            Width="100"
                                            Height="8"
                                            Value="{Binding Progress}"
                                            Visibility="{Binding ProgressVisibility}"
                                            VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Estado de descarga -->
        <Border Grid.Row="1"
                x:Name="DownloadPanel"
                Background="{DynamicResource PrimaryBackgroundBrush}"
                Visibility="Collapsed"
                VerticalAlignment="Center">
            <StackPanel HorizontalAlignment="Center">
                <TextBlock x:Name="DownloadStatusText"
                           Text="Descargando programas..."
                           FontSize="32"
                           FontWeight="Light"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           TextAlignment="Center"
                           Margin="0,0,0,20"/>

                <ProgressBar x:Name="TotalProgressBar"
                            Width="400"
                            Height="12"
                            Minimum="0"
                            Maximum="100"/>

                <TextBlock x:Name="CurrentProgramText"
                           FontSize="16"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           TextAlignment="Center"
                           Margin="0,20,0,0"/>
            </StackPanel>
        </Border>

        <!-- Botones de navegación -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Saltar"
                    Click="Skip_Click"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Margin="0,0,10,0"
                    x:Name="SkipButton"/>
            <Button x:Name="ContinueButton"
                    Content="Instalar y continuar"
                    Click="Continue_Click"
                    Style="{StaticResource PrimaryButtonStyle}"/>
        </StackPanel>
    </Grid>
</UserControl>
